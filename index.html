<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Interactiva - Plan de Estudios</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #121212;
      color: #e0f7fa;
      margin: 0;
      padding: 20px;
    }

    h1 {
      color: #82b1ff;
      text-align: center;
      margin-bottom: 20px;
    }

    .contenedor-malla {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding-bottom: 10px;
    }

    .bloque {
      flex: 0 0 auto;
      background-color: #1a1a2e;
      border-radius: 12px;
      padding: 12px;
      min-width: 200px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    .bloque h2 {
      color: #90caf9;
      font-size: 16px;
      margin: 0 0 12px;
      border-bottom: 1px solid #3949ab;
      padding-bottom: 6px;
    }

    .materias {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .materia {
      background-color: #263238;
      color: #e0f7fa;
      border: 2px solid #64b5f6;
      border-radius: 8px;
      padding: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    .materia:hover {
      background-color: #37474f;
    }

    .completada {
      background-color: #1e88e5 !important;
      text-decoration: line-through;
    }

    .bloqueada {
      background-color: #2b2b2b;
      color: #777;
      border-color: #555;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Plan de Estudios</h1>
  <div class="contenedor-malla" id="contenedor"></div>

  <script>
    const materias = [
      // Ciclo Introductorio
      { nombre: "Lectura y escritura académica", bloque: "Ciclo introductorio", correlativas: [] },
      { nombre: "Matemática", bloque: "Ciclo introductorio", correlativas: [] },
      { nombre: "Elementos de programación y lógica", bloque: "Ciclo introductorio", correlativas: [] },

      // Núcleo Básico
      { nombre: "Introducción a la Programación", bloque: "Núcleo básico", correlativas: ["Elementos de programación y lógica", "Matemática", "Lectura y escritura académica"] },
      { nombre: "Organización de Computadoras", bloque: "Núcleo básico", correlativas: ["Elementos de programación y lógica", "Matemática", "Lectura y escritura académica"] },
      { nombre: "Matemática I", bloque: "Núcleo básico", correlativas: ["Elementos de programación y lógica", "Matemática", "Lectura y escritura académica"] },
      { nombre: "Bases de Datos", bloque: "Núcleo básico", correlativas: ["Elementos de programación y lógica", "Matemática", "Lectura y escritura académica"] },
      { nombre: "Programación con Objetos I", bloque: "Núcleo básico", correlativas: ["Introducción a la Programación"] },
      { nombre: "Estructuras de Datos", bloque: "Núcleo básico", correlativas: ["Introducción a la Programación"] },
      { nombre: "Programación con Objetos II", bloque: "Núcleo básico", correlativas: ["Programación con Objetos I"] },

      // Núcleo Avanzado (requiere 3 del básico)
      { nombre: "Redes de Computadoras", bloque: "Núcleo avanzado", correlativas: ["Organización de Computadoras"] },
      { nombre: "Sistemas Operativos", bloque: "Núcleo avanzado", correlativas: ["Introducción a la Programación", "Organización de Computadoras"] },
      { nombre: "Programación Concurrente", bloque: "Núcleo avanzado", correlativas: ["Estructuras de Datos"] },
      { nombre: "Matemática II", bloque: "Núcleo avanzado", correlativas: ["Matemática I"] },
      { nombre: "Elementos de Ingeniería de Software", bloque: "Núcleo avanzado", correlativas: ["Programación con Objetos II"] },
      { nombre: "Construcción de Interfaces de Usuario", bloque: "Núcleo avanzado", correlativas: ["Programación con Objetos II"] },
      { nombre: "Estrategias de Persistencia", bloque: "Núcleo avanzado", correlativas: ["Bases de Datos", "Programación con Objetos II"] },
      { nombre: "Programación Funcional", bloque: "Núcleo avanzado", correlativas: ["Estructuras de Datos"] },
      { nombre: "Desarrollo de Aplicaciones", bloque: "Núcleo avanzado", correlativas: ["Elementos de Ingeniería de Software", "Construcción de Interfaces de Usuario", "Estrategias de Persistencia"] },
      { nombre: "Laboratorio de Sistemas Operativos y Redes", bloque: "Núcleo avanzado", correlativas: ["Redes de Computadoras", "Sistemas Operativos"] },

      // Núcleo Complementario (solo nombres, desbloqueo condicional puede agregarse después)
      { nombre: "Seguridad Informática", bloque: "Núcleo complementario", correlativas: [] },
      { nombre: "Taller de Trabajo Universitario", bloque: "Núcleo complementario", correlativas: [] },
      { nombre: "Bases de Datos II", bloque: "Núcleo complementario", correlativas: [] },

      // Trabajo final
      { nombre: "TIP", bloque: "Trabajo final", correlativas: ["Seguridad Informática", "Taller de Trabajo Universitario", "Bases de Datos II"] },

      // Otros requisitos
      { nombre: "Inglés I", bloque: "Otros", correlativas: ["Elementos de programación y lógica", "Matemática", "Lectura y escritura académica"] },
      { nombre: "Inglés II", bloque: "Otros", correlativas: ["Inglés I"] },
    ];

    const completadas = new Set();

    function puedeDesbloquear(materia) {
      return materia.correlativas.every(c => completadas.has(c));
    }

    function renderMalla() {
      const contenedor = document.getElementById('contenedor');
      contenedor.innerHTML = '';

      const bloquesOrden = [
        "Ciclo introductorio",
        "Núcleo básico",
        "Núcleo avanzado",
        "Núcleo complementario",
        "Trabajo final",
        "Otros"
      ];

      for (const bloque of bloquesOrden) {
        const bloqueMaterias = materias.filter(m => m.bloque === bloque);
        const bloqueDiv = document.createElement('div');
        bloqueDiv.className = 'bloque';

        const titulo = document.createElement('h2');
        titulo.textContent = bloque;
        bloqueDiv.appendChild(titulo);

        const lista = document.createElement('div');
        lista.className = 'materias';

        for (const mat of bloqueMaterias) {
          const btn = document.createElement('div');
          btn.textContent = mat.nombre;
          btn.className = 'materia';

          if (!puedeDesbloquear(mat) && !completadas.has(mat.nombre)) {
            btn.classList.add('bloqueada');
          } else if (completadas.has(mat.nombre)) {
            btn.classList.add('completada');
          }

          btn.onclick = () => {
            if (!puedeDesbloquear(mat)) return;
            if (completadas.has(mat.nombre)) {
              completadas.delete(mat.nombre);
            } else {
              completadas.add(mat.nombre);
            }
            renderMalla();
          };

          lista.appendChild(btn);
        }

        bloqueDiv.appendChild(lista);
        contenedor.appendChild(bloqueDiv);
      }
    }

    renderMalla();
  </script>
</body>
</html>

