<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Interactiva - Plan de Estudios</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #e3f2fd;
      margin: 0;
      padding: 20px;
    }
    h2 {
      color: #0d47a1;
    }
    .bloque {
      margin-bottom: 40px;
    }
    .materias {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .materia {
      padding: 10px;
      border-radius: 8px;
      background-color: #bbdefb;
      color: #0d47a1;
      border: 2px solid #90caf9;
      cursor: pointer;
      user-select: none;
    }
    .completada {
      background-color: #64b5f6;
      text-decoration: line-through;
    }
    .bloqueada {
      background-color: #e0e0e0;
      color: #9e9e9e;
      border-color: #bdbdbd;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Plan de Estudios</h1>

  <div id="contenedor"></div>

  <script>
    const materias = [
      // Ciclo introductorio
      { id: "lectura", nombre: "Lectura y escritura académica", bloque: "Ciclo introductorio", correlativas: [] },
      { id: "matematica", nombre: "Matemática", bloque: "Ciclo introductorio", correlativas: [] },
      { id: "elementos", nombre: "Elementos de programación y lógica", bloque: "Ciclo introductorio", correlativas: [] },

      // Núcleo básico
      { id: "introprog", nombre: "Introducción a la Programación", bloque: "Núcleo básico", correlativas: ["elementos", "matematica", "lectura"] },
      { id: "orgcomp", nombre: "Organización de Computadoras", bloque: "Núcleo básico", correlativas: ["elementos", "matematica", "lectura"] },
      { id: "mate1", nombre: "Matemática I", bloque: "Núcleo básico", correlativas: ["elementos", "matematica", "lectura"] },
      { id: "poo1", nombre: "Programación con Objetos I", bloque: "Núcleo básico", correlativas: ["introprog"] },
      { id: "bd", nombre: "Bases de Datos", bloque: "Núcleo básico", correlativas: ["elementos", "matematica", "lectura"] },
      { id: "ed", nombre: "Estructuras de Datos", bloque: "Núcleo básico", correlativas: ["introprog"] },
      { id: "poo2", nombre: "Programación con Objetos II", bloque: "Núcleo básico", correlativas: ["poo1"] },

      // Obligatorios
      { id: "ingles1", nombre: "Inglés I", bloque: "Otros", correlativas: ["elementos", "matematica", "lectura"] },
      { id: "ingles2", nombre: "Inglés II", bloque: "Otros", correlativas: ["ingles1"] },

      // Núcleo avanzado
      { id: "redes", nombre: "Redes de Computadoras", bloque: "Núcleo avanzado", correlativas: ["orgcomp"] },
      { id: "so", nombre: "Sistemas Operativos", bloque: "Núcleo avanzado", correlativas: ["introprog", "orgcomp"] },
      { id: "pc", nombre: "Programación Concurrente", bloque: "Núcleo avanzado", correlativas: ["ed"] },
      { id: "mate2", nombre: "Matemática II", bloque: "Núcleo avanzado", correlativas: ["mate1"] },
      { id: "eis", nombre: "Elementos de Ingeniería de Software", bloque: "Núcleo avanzado", correlativas: ["poo2"] },
      { id: "ciu", nombre: "Construcción de Interfaces de Usuario", bloque: "Núcleo avanzado", correlativas: ["poo2"] },
      { id: "ep", nombre: "Estrategias de Persistencia", bloque: "Núcleo avanzado", correlativas: ["bd", "poo2"] },
      { id: "pf", nombre: "Programación Funcional", bloque: "Núcleo avanzado", correlativas: ["ed"] },
      { id: "da", nombre: "Desarrollo de Aplicaciones", bloque: "Núcleo avanzado", correlativas: ["eis", "ciu", "ep"] },
      { id: "lab", nombre: "Lab de SO y Redes", bloque: "Núcleo avanzado", correlativas: ["redes", "so"] },

      // Trabajo final
      { id: "tip", nombre: "Trabajo de Inserción Profesional (TIP)", bloque: "Trabajo final", correlativas: [] },

      // Núcleo complementario (simulado sin correlativas específicas)
      { id: "comp1", nombre: "Seguridad Informática", bloque: "Núcleo complementario", correlativas: [] },
      { id: "comp2", nombre: "Taller de Trabajo Universitario", bloque: "Núcleo complementario", correlativas: [] },
      { id: "comp3", nombre: "Bases de Datos II", bloque: "Núcleo complementario", correlativas: [] },
      // ... podés completar el resto si querés
    ];

    let completadas = new Set();

    function contarPorBloque(bloque) {
      return materias.filter(m => m.bloque === bloque && completadas.has(m.id)).length;
    }

    function desbloqueada(materia) {
      const requisitosCumplidos = materia.correlativas.every(id => completadas.has(id));
      if (materia.bloque === "Núcleo avanzado") {
        return requisitosCumplidos && contarPorBloque("Núcleo básico") >= 3;
      }
      if (materia.bloque === "Núcleo complementario") {
        return requisitosCumplidos && contarPorBloque("Núcleo avanzado") >= 5;
      }
      if (materia.bloque === "Trabajo final") {
        return contarPorBloque("Núcleo complementario") >= 3;
      }
      return requisitosCumplidos;
    }

    function render() {
      const contenedor = document.getElementById("contenedor");
      contenedor.innerHTML = "";
      const bloques = [...new Set(materias.map(m => m.bloque))];
      bloques.forEach(bloque => {
        const divBloque = document.createElement("div");
        divBloque.className = "bloque";
        divBloque.innerHTML = `<h2>${bloque}</h2>`;
        const divMaterias = document.createElement("div");
        divMaterias.className = "materias";
        materias.filter(m => m.bloque === bloque).forEach(m => {
          const div = document.createElement("div");
          div.className = "materia";
          div.textContent = m.nombre;
          if (completadas.has(m.id)) {
            div.classList.add("completada");
          } else if (!desbloqueada(m)) {
            div.classList.add("bloqueada");
          } else {
            div.onclick = () => {
              completadas.add(m.id);
              render();
            };
          }
          divMaterias.appendChild(div);
        });
        divBloque.appendChild(divMaterias);
        contenedor.appendChild(divBloque);
      });
    }

    render();
  </script>
</body>
</html>
